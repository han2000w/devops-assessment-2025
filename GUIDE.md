# [스팬딧] DevOps 엔지니어 채용 과제 안내

안녕하세요, 지원자님.  
스팬딧 채용에 관심을 가져주셔서 진심으로 감사합니다.

지원자님의 DevOps 역량을 보다 깊이 있게 이해하고, 실무 역량을 확인하고자 본 과제를 드립니다. 이 과제는 정답을 찾는 시험이 아니며, 주어진 비즈니스 요구사항과 기술적 제약 조건 하에서 **어떻게 문제를 분석하고 해결하는지**, 그리고 **자신의 설계를 어떻게 논리적으로 설명하는지**를 확인하기 위함입니다.

편안한 마음으로 지원자님의 실력을 보여주시길 바랍니다.

---

## 📋 목차

1. [시나리오: 신규 서비스 인프라 구축](#1-시나리오-신규-서비스-영수증-분석-api-인프라-구축)
2. [과제 요구사항](#2-과제-요구사항)
3. [제공되는 자료](#3-제공되는-자료)
4. [제출 및 평가 안내](#4-제출-및-평가-안내)

---

## 1. 시나리오: 신규 서비스 "영수증 분석 API" 인프라 구축

당신은 스팬딧의 **DevOps 엔지니어**로, 새로운 핵심 서비스인 **"영수증 분석 API"**의 인프라 설계 및 구축을 담당하게 되었습니다.

### 서비스 개요

이 서비스는 사용자가 영수증 이미지를 업로드하면, 이미지 안의 텍스트를 분석하여 지출 내역을 데이터베이스에 저장하는 기능을 합니다.

### 요구사항 및 제약 조건

#### 1. 기술 스택 컨텍스트

- **주력 환경**: 스팬딧의 대부분 프로덕션 서비스는 **컨테이너 기반 인프라**에서 운영되고 있습니다.
- **유연한 선택**: 본 과제에서는 특정 기술 스택을 강제하지 않습니다. 다만, 프로덕션 환경 설계 시 **왜 해당 기술을 선택했는지** README에 명확히 기술해주세요.
  - 예: AWS ECS, EKS, GCP Cloud Run, Azure Container Apps 등

#### 2. 서비스 특성 및 성능 요구사항

- **가용성**: 이 API는 스팬딧의 핵심 기능이므로 **고가용성**을 확보해야 합니다.
  - Multi-AZ 구성 또는 이에 준하는 가용성 전략 필요
- **트래픽 패턴**: 
  - 평소: 낮은 트래픽 (시간당 100 requests)
  - 피크: **월말 정산 기간(매월 마지막 3일)에는 평소의 10배 트래픽** 발생
  - Auto-scaling으로 피크 대응 후, 자동 축소하여 비용 최적화 필요
- **배포 전략**: 서비스 중단에 민감하므로, **무중단 배포**가 가능한 구조 고려
  - Blue/Green, Rolling, Canary 등

#### 3. 보안 및 데이터 관리

- **데이터베이스**: 고객의 금융 정보가 포함될 수 있으므로, DB는 외부에서 직접 접근할 수 없는 **Private Subnet**에 위치해야 합니다.
- **민감 정보 관리**: DB 접속 정보, 외부 API 키 등 민감한 정보는 소스 코드나 GitHub에 노출되지 않도록 안전하게 관리해야 합니다.
  - AWS Secrets Manager, Parameter Store, Vault 등 활용 방안 제시

---

## 2. 과제 요구사항

### [PART 1] 필수 과제

#### 📦 1. 컨테이너 기반 로컬 실행 환경 구성

- 제공된 애플리케이션(API, DB)이 로컬 환경에서 `docker-compose up` 명령어로 한 번에 실행될 수 있도록 구성합니다.
- 이미 제공된 `Dockerfile`과 `docker-compose.yml`이 있으니, 필요 시 최적화하거나 수정해주세요.
- **평가 포인트**:
  - 이미지 용량, 빌드 속도, 보안 측면의 최적화
  - Multi-stage builds, 불필요한 레이어 제거 등

#### 🔄 2. CI/CD 파이프라인 설계

- **GitHub Actions**를 사용하여 `main` 브랜치에 코드가 Push 되었을 때, 다음 과정이 자동화되는 워크플로우를 작성합니다:
  1. 테스트 (간단한 헬스체크 테스트 등)
  2. Docker 이미지 빌드
  3. 배포 (시뮬레이션)

- **중요**: 
  - 실제 AWS 환경으로 배포할 필요는 없습니다
  - **워크플로우가 실제로 실행되지 않아도 됩니다** (코드만 평가)
  - 배포 단계는 `echo` 명령어로 시뮬레이션하되, 주석으로 실제 명령어를 표시하세요

- **시뮬레이션 예시**:
  ```yaml
  - name: Deploy to Production (Simulated)
    run: |
      echo "🚀 Deploying to production..."
      echo "✅ Deployment completed"
      # 실제 환경에서는:
      # aws ecs update-service --cluster prod --service api --force-new-deployment
  ```

- **평가 포인트**:
  - 테스트 → 빌드 → 배포 흐름의 논리성
  - 각 단계의 실패 처리 (롤백 포함)
  - Secrets 관리, 이미지 스캔 등 보안 고려
  - 주석으로 설명 추가하여 의도 명확히 표현
  - 실제 적용 시 어떻게 수정할지 주석으로 가이드

- **파일 위치**: `.github/workflows/deploy.yml` (또는 원하는 파일명)

#### 📝 3. 설계 및 운영 계획서 작성

리포지토리의 `README.md` 파일에 아래 내용을 **상세히** 작성합니다.  
**이 문서는 지원자님의 설계 역량과 소통 능력을 판단하는 가장 중요한 평가 항목입니다.**

##### 필수 포함 내용:

**a. 클라우드 아키텍처 다이어그램**
- 프로덕션 환경의 전체 인프라 구조를 시각화
- 도구: draw.io, Lucidchart, Mermaid.js, 또는 손그림 스캔본도 가능
- 포함 요소: VPC, Subnet, Load Balancer, Container, Database, 모니터링 등

**b. 기술 선택 및 설계 근거**
- 왜 이러한 아키텍처를 설계했는지 논리적으로 설명
- 특정 AWS 서비스를 선택한 이유 (또는 GCP, Azure)
- 주어진 요구사항(고가용성, Auto-scaling, 비용 효율성)을 어떻게 충족시켰는지

**c. 운영 자동화 및 장애 대응 계획**
- **모니터링 전략**:
  - 주요 지표 (CPU, Memory, Request latency, Error rate)
  - 알림 조건 (예: Error rate > 5% 시 Slack 알림)
- **무중단 배포 전략**: Blue/Green, Rolling 등 구체적 방법
- **장애 대응 시나리오**:
  - DB 연결 실패 시
  - 특정 API 서버 장애 시
  - 트래픽 급증 시

---

### [PART 2] 심화 과제 (선택 사항)

본인의 경험과 강점을 보여줄 수 있는 항목을 **자유롭게 선택**하여 수행해주세요.  
**하나만 해도 되고, 여러 개를 해도 좋으며, 일부만 시도해도 괜찮습니다.**

#### ▶ Option 1: IaC (Infrastructure as Code)

- **요구사항**: 
  - README에 설계한 인프라 아키텍처를 **Terraform 코드**로 구현
  - 변수 분리(`variables.tf`), 모듈 활용 등 재사용성 고려
- **결과물**: 
  - `infra/main.tf`, `infra/variables.tf`, `infra/outputs.tf` 등
  - 실행 가능한 `.tf` 파일 일체
- **참고**: 
  - 실제 `terraform apply`는 하지 않습니다
  - 전체를 완벽히 구현하지 않아도 됩니다 (일부 리소스만 구현해도 평가 가능)
  - Terraform 외에 다른 IaC 도구를 사용해도 무방합니다

#### ▶ Option 2: 운영 시나리오 기반 심층 분석

다음 3가지 운영 시나리오 중 **관심 있는 것을 선택**하여 구체적인 대응 계획을 문서화하세요:

**1. 장애 대응 시나리오**
- **상황**: 월말 피크 타임에 DB Connection Pool 고갈 발생
- **요구사항**:
  - 즉시 대응 절차 (5분 내)
  - 근본 원인 분석 방법
  - 재발 방지를 위한 인프라/코드 개선안

**2. 비용 최적화 시나리오**
- **상황**: AWS 월 비용이 예상보다 30% 초과
- **요구사항**:
  - 비용 분석 접근법 (어떤 도구/지표 확인)
  - 최적화 우선순위 (예: 컴퓨팅, 스토리지, 네트워크)
  - 구체적 개선안 3가지 이상

**3. 보안 강화 시나리오**
- **상황**: 보안 감사에서 IAM 권한이 과도하게 설정되어 있다는 지적
- **요구사항**:
  - 최소 권한 원칙(Principle of Least Privilege) 적용 계획
  - Secrets 관리 개선안
  - 네트워크 보안 강화 방안

#### ▶ Option 3: 기타 DevOps 역량 증명

위 옵션 외에도 본인의 강점을 보여줄 수 있다면 자유롭게 추가하세요:
- 모니터링 대시보드 설계
- 보안 체크리스트 문서
- 성능 테스트 계획서
- 재해 복구(DR) 전략 문서

---

## 3. 제공되는 자료

본 과제에는 **완전히 동작하는 FastAPI 기반 샘플 애플리케이션**이 함께 제공됩니다.

### 📦 샘플 애플리케이션 개요

- **기술 스택**: Python 3.11 + FastAPI + PostgreSQL
- **주요 기능**:
  - `POST /api/receipts` - 영수증 이미지 업로드 (실제 DB 저장)
  - `GET /api/receipts/{id}` - 영수증 조회 (실제 DB 조회)
  - `GET /health` - 헬스체크 (실제 DB 연결 확인)
  - `GET /docs` - Swagger UI 자동 문서

### ✅ 실제 구현된 기능

- PostgreSQL 연결 풀 관리 (asyncpg)
- 영수증 데이터 실제 저장/조회
- DB 헬스체크 (연결 상태 확인)

### ⚠️ 더미로 처리된 부분

비즈니스 로직의 복잡한 부분은 간소화되어 있습니다:
- 이미지 S3 업로드 (파일은 받지만 저장하지 않음)
- OCR 텍스트 추출 (고정된 더미 데이터 사용)
- 실제 금액 파싱 (15,000원으로 고정)

### 🚀 로컬 실행 방법

```bash
# 레포지토리 클론
git clone <제공된-레포지토리-URL>
cd devops-assessment-2025

# 한 번에 실행
docker-compose up -d

# API 테스트
./test-api.sh
```

---

## 4. 제출 및 평가 안내

### 📅 제출 기한

**과제 안내 메일 수신 후 72시간 이내**

### 📦 제출물

**개인 GitHub Public Repository 주소**

다음 내용이 포함되어 있어야 합니다:
- [필수] `README.md` - 필수 과제와 심화 과제
- [필수] `.github/workflows/deploy.yml` - CI/CD 워크플로우
- [필수] `docker-compose.yml` - 로컬 실행 환경 (수정 시)
- [선택] `infra/` 디렉토리 - IaC 코드 (Terraform 등)
- [선택] 기타 본인의 강점을 보여주는 자료

---

**지원자님의 훌륭한 결과물을 기대하겠습니다. Good luck! 🚀**

스팬딧 드림
